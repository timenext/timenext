function addItemToCart(t){var e=$(t).attr("data-id");return void 0!==e?BX.ajax({method:"POST",url:"/ajax/addbasket.php",data:{id:e},processData:!1,onsuccess:function(e){$(t).find("span").html("В корзине"),$(t).find("img").addClass("active-basket"),BX.ajax.Setup({denyShowWait:!0},!0),BX.ajax.insertToNode("/ajax/basket.php","card-info");var a=BX.parseJSON(e);a&&"OK"===a.STATUS&&BX.PopupWindowManager.create("add-to-cart-message-N6Br",null,{content:'<div class="atcmN6Br_message">'+a.MESSAGE+'</div><br><a href="/personal/cart/" class="atcmN6Br_go-to-cart">Перейти в корзину</a>',titleBar:!1,closeIcon:!0,autoHide:!0,overlay:!0}).show()}}):BX.PopupWindowManager.create("add-to-cart-message-N6Br",null,{content:'<div class="atcmN6Br_message">Выберите пожалуйста параметры товара</div>',titleBar:!1,closeIcon:!0,autoHide:!0,overlay:!0}).show(),!1}function OpenClose(t){BX.hasClass(t,"close")?(BX.addClass(t,"open"),BX.removeClass(t,"close")):(BX.addClass(t,"close"),BX.removeClass(t,"open"))}function addHtml(t,e,a,i){if("list"==a);else if("detail"==a){var o=BX(t).value;"null"!=o?($(e).each((function(t,e){e.ID==o&&(void 0!==e.PREVIEW_PICTURE&&($("div#primary_pic-zoomContainer").remove(),$("div.bidImg").html('<img id="primary_pic" class="item-img" src="'+e.PREVIEW_PICTURE+'">'),$("#primary_pic").ezPlus({gallery:"gallery_01",cursor:"pointer",galleryActiveClass:"active",imageCrossfade:!1,zoomType:"inner",loadingIcon:"/local/templates/focus_corp/images/image_1140062.gif",borderSize:0})),void 0!==e.STORE?($("div.storage").removeClass("hidden"),$("div.storage").html(e.STORE),$(".storage select").selectric({maxHeight:200,disableOnMobile:!1,optionsItemBuilder:function(t,e,a){return e.val().length?'<span class="ico ico-'+e.val()+'"></span>'+t.text:t.text}})):($("div.storage").addClass("hidden"),$("div.storage").html("")))})),$(".btn-green.btn-buy").attr("data-id",o),$(".btn-green.btn-buy").find("span").html("В корзину"),$(".btn-green.btn-buy").find("img").removeClass("active-basket")):($(".btn-green.btn-buy").removeAttr("data-id"),$("div.storage").addClass("hidden"),$("div.storage").html(""))}}function checkSKU(t,e,a,i,o){for(var n=0;n<a;n++)if(e[n]!=document.forms[t][o+"_"+i[n].CODE].value)return!1;return!0}function checkSKUPopup(t,e,a,i,o){for(var n=0;n<a-1;n++)if(document.forms[t][i[n].CODE]&&e[n]!=document.forms[t][i[n].CODE].value)return!1;return!0}function buildSelect(t,e,a,i,o,n,s){for(var l=o.length,r=e+"_"+o[l-1].CODE,d=a;d<l;d++){var c=$("#"+e+" #prop_"+d)[0];c&&c.parentNode.removeChild(c)}var p="",h=BX.create("SELECT",{props:{name:e+"_"+o[a].CODE,id:e+"_"+o[a].CODE}});$(h).bind("change",a<l-1?function(){if(buildSelect(t,e,a+1,i,o,n,s),"null"!=this.value){BX(e+"_"+o[a+1].CODE).disabled=!1;var d=BX(e+"_"+o[a+1].CODE);2==$(d).find("option").length&&$(d).find("option").each((function(){"null"!=$(this).val()&&($(this).attr("selected",!0),l>2&&(buildSelect(t,e,a+2,i,o,n,s),BX(e+"_"+o[a+2].CODE).disabled=!1))}))}var c=BX(r).value;addHtml(r,i,n,"clear_"+s),addHtml(r,i,n,s),$("#"+e+" input[type=hidden]").val(c),$("#sku_selector select").selectric({maxHeight:200,disableOnMobile:!1})}:function(){var t=BX(r).value;"null"!=this.value?(addHtml(r,i,n,s),p=this.value):addHtml(r,i,n,"clear_"+s),$("#"+e+" input[type=hidden]").val(t)}),0!=a&&(h.disabled=!0);var u=[];for(d=0;d<i.length;d++)checkSKU(t,i[d],a,o,e)&&!BX.util.in_array(i[d][a],u)&&"Не задано"!=i[d][a]&&(h.add(new Option(i[d][a],a<l-1?i[d][a]:i[d].ID)),u.push(i[d][a]));var f=BX.create("div",{props:{id:"prop_"+a,title:o[a].NAME,className:"item-option"},children:[BX.create("span",{html:o[a].NAME+": "}),h]});BX.findChild(BX(e),{tagName:"div"},!1,!1).appendChild(f),a<l-1&&buildSelect(t,e,a+1,i,o,n,s),1==$("#"+e+" #prop_"+a+" select").lenght&&buildSelect(t,e,a+1,i,o,n,s),upd4(a,p,e)}function buildSelectPopup(t,e,a,i,o,n,s){for(var l=o.length,r=e+"_"+o[l-1].CODE,d=a;d<l;d++){var c=$("#"+e+" #proprezerv_"+d)[0];c&&c.parentNode.removeChild(c)}var p="",h=BX.create("SELECT",{props:{name:"form_text_"+rose[a].IDD,id:e+"_"+o[a].CODE}});$(h).bind("change",a<l-1?function(){if(buildSelectPopup(t,e,a+1,i,o,n,s),"null"!=this.value){BX(e+"_"+o[a+1].CODE).disabled=!1;var d=BX(e+"_"+o[a+1].CODE);2==$(d).find("option").length&&$(d).find("option").each((function(){"null"!=$(this).val()&&($(this).attr("selected",!0),l>2&&(buildSelectPopup(t,e,a+2,i,o,n,s),BX(e+"_"+o[a+2].CODE).disabled=!1))}))}var c=BX(r).value;$("#"+e+" input[type=hidden]").val(c),$("#skudiv_modul select").selectric({maxHeight:200,disableOnMobile:!1})}:function(){BX(r).value;"null"!=this.value&&(p=this.value)}),0!=a&&(h.disabled=!0);var u=[];for(d=0;d<i.length;d++)checkSKUPopup("REZERV",i[d],a,o,e)&&!BX.util.in_array(i[d][a],u)&&"Не задано"!=i[d][a]&&(h.add(new Option(i[d][a],o[a].NAME+": "+i[d][a])),u.push(i[d][a]));var f=BX.create("div",{props:{id:"proprezerv_"+a,title:o[a].NAME,className:"item-option"},children:[BX.create("span",{html:o[a].NAME+": "}),h]});BX.findChild(BX(e),{tagName:"div"},!1,!1).appendChild(f),a<l-1&&buildSelectPopup(t,e,a+1,i,o,n,s),updPopup(a,p,e)}function upd4(t,e,a){$("#"+a+" #prop_"+t+" select").each((function(){$(this).find("option").each((function(){$(this).text($(this).text().replace(",","."))})),$(this).html($(this).find("option").sort((function(t,e){return parseFloat(t.text)==parseFloat(e.text)?0:parseFloat(t.text)>parseFloat(e.text)?-1:1})));var t,e,a,i,o=0,n=0,s=0;$(this).find("option").each((function(){s=parseFloat($(this).val().replace(",","."))>0?1:0,0==parseFloat($(this).val().replace(",","."))&&($(this).parent().find(":selected").removeAttr("selected"),$(this).after('<option selected="selected" value="null">...</option>'),o=1,n=parseFloat($(this).val().replace(",","."))<0?1:0),0==o&&n==s&&($(this).parent().find(":selected").removeAttr("selected"),$(this).before('<option selected value="null">Выбрать</option>'),o=1)})),0==o&&$(this).append('<option selected value="null">Выбрать</option>'),"add"==$(this).attr("id")&&($(this).find("option").each((function(){"Выбрать"==$(this).text()&&(i=$(this).attr("selected",!0)),"LOW"==$(this).text()&&(t=$(this)),"MED"==$(this).text()&&(e=$(this)),"HIGH"==$(this).text()&&(a=$(this))})),$(this).empty().append(i,t,e,a).find("option:first").attr("selected",!0)),"color"==$(this).attr("id")&&$(this).find("option").each((function(){"Выбрать"==$(this).text()?$(this).attr("selected",!0):$(this).attr("selected",!1)}))}))}function updPopup(t,e,a){$("#"+a+" #proprezerv_"+t+" select").each((function(){$(this).find("option").each((function(){$(this).text($(this).text().replace(",","."))})),$(this).html($(this).find("option").sort((function(t,e){return parseFloat(t.text)==parseFloat(e.text)?0:parseFloat(t.text)>parseFloat(e.text)?-1:1})));var t,e,a,i,o=0,n=0,s=0;$(this).find("option").each((function(){s=parseFloat($(this).text().replace(",","."))>0?1:0,0==parseFloat($(this).text().replace(",","."))&&($(this).parent().find(":selected").removeAttr("selected"),$(this).after('<option selected="selected" value="null">Выбрать</option>'),o=1,n=parseFloat($(this).text().replace(",","."))<0?1:0),0==o&&n==s&&($(this).parent().find(":selected").removeAttr("selected"),$(this).before('<option selected value="null">Выбрать</option>'),o=1)})),0==o&&$(this).append('<option selected value="null">Выбрать</option>'),"add"==$(this).attr("id")&&($(this).find("option").each((function(){"Выбрать"==$(this).text()&&(i=$(this).attr("selected",!0)),"LOW"==$(this).text()&&(t=$(this)),"MED"==$(this).text()&&(e=$(this)),"HIGH"==$(this).text()&&(a=$(this))})),$(this).empty().append(i,t,e,a).find("option:first").attr("selected",!0)),"color"==$(this).attr("id")&&$(this).find("option").each((function(){"Выбрать"==$(this).text()?$(this).attr("selected",!0):$(this).attr("selected",!1)}))}))}$("html").on("focus","#phone",(function(t){$(this).attr("type","tel")})),$(document).ready((function(){var t=$("#overlay"),e=$(".open_modal"),a=$(".modal_close, #overlay"),i=$(".modal_div");e.click((function(e){e.preventDefault();var a=$(this).offset().top-100,i=$(this).attr("href");t.fadeIn(400,(function(){$(i).css("display","block").animate({opacity:1,top:""+a},200)}))})),a.click((function(){i.animate({opacity:0,top:"45%"},200,(function(){$(this).css("display","none"),t.fadeOut(400)})),i.find(".body").html(""),i.css("position","")})),$("a.form_add").click((function(){var t=$(this).attr("data-id"),e=$(this).attr("data-name"),a=$(this).attr("href");BX.ajax({url:"/ajax/form.php",data:{id:t,name:e},method:"POST",onsuccess:function(t){$(a+" .body").html(t),$('input[data-name="Y"]').attr("value",e)},onfailure:function(){}})})),$("a.add_reviews").click((function(){$(".block_reviews").toggle();var t=$(this).attr("data-id");return BX.ajax({url:"/ajax/rew.php",data:{id:t},method:"POST",onsuccess:function(t){$(".block_reviews").html(t)},onfailure:function(){}}),!1})),$("a.add_reviews_tovar").click((function(){$(".block_reviews").toggle();var t=$(this).attr("data-id"),e=$(this).attr("data-tovar");return BX.ajax({url:"/ajax/rew_tovar.php",data:{id:t,tovar:e},method:"POST",onsuccess:function(t){$(".block_reviews").html(t)},onfailure:function(){}}),!1})),$("a.popup_rev").click((function(){var t=$(this).attr("data-id"),e=$(this).attr("href");BX.ajax({url:"/ajax/rew.php",data:{id:t},method:"POST",onsuccess:function(t){$(e+" .body").html(t)},onfailure:function(){}})})),$("input#phone").inputmask("mask",{mask:"+7 (999) 999-99-99"}),$(".bx-filter .t-filter").click((function(){$(".bx-filter .noprice").slideToggle(),"Еще параметры"==$(this).text()?$(this).text("Свернуть фильтр"):"Свернуть фильтр"==$(this).text()&&$(this).text("Еще параметры")})),$(".look-also").equalize({children:".item-title",reset:!0}),$(".look-also").equalize({children:".item-disc",reset:!0}),$(".look-also").slick({infinite:!1,autoplay:!1,autoplaySpeed:15e3,slidesToShow:4,slidesToScroll:1}),$(".storage select").selectric({maxHeight:200,disableOnMobile:!1,optionsItemBuilder:function(t,e,a){return e.val().length?'<span class="ico ico-'+e.val()+'"></span>'+t.text:t.text}})}));