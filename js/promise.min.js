!function(n){"use strict";if(void 0===n.Promise||-1===n.Promise.toString().indexOf("[native code]")){var e="[[PromiseStatus]]",t="[[PromiseValue]]",o="pending",i="internal pending",r="resolved",c="rejected",f=function(n,c){n[e]===i&&(n=n[t]),n[e]===o?n.deferreds.push(c):(n.handled=!0,setTimeout((function(){var o=n[e]===r?c.onFulfilled:c.onRejected;if(o)try{u(c.promise,o(n[t]))}catch(n){s(c.promise,n)}else n[e]===r?u(c.promise,n[t]):s(c.promise,n[t])}),0))},u=function(n,o){if(o===n)throw new TypeError("A promise cannot be resolved with it promise.");try{if(o&&("object"==typeof o||"function"==typeof o)){if(o instanceof a)return n[e]=i,n[t]=o,void l(n);if("function"==typeof o.then)return void d(o.then.bind(o),n)}n[e]=r,n[t]=o,l(n)}catch(e){s(n,e)}},s=function(n,o){n[e]=c,n[t]=o,l(n)},l=function(n){n[e]===c&&0===n.deferreds.length&&setTimeout((function(){n.handled||console.error("Unhandled Promise Rejection: "+n[t])}),0),n.deferreds.forEach((function(e){f(n,e)})),n.deferreds=null},d=function(n,e){var t=!1;try{n((function(n){t||(t=!0,u(e,n))}),(function(n){t||(t=!0,s(e,n))}))}catch(n){t||(t=!0,s(e,n))}},h=function(n,e,t){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.promise=t},a=function(n){this[e]=o,this[t]=null,this.handled=!1,this.deferreds=[],d(n,this)};a.prototype.catch=function(n){return this.then(null,n)},a.prototype.then=function(n,e){var t=new a((function(){}));return f(this,new h(n,e,t)),t},a.all=function(n){var e=[].slice.call(n);return new a((function(n,t){if(0===e.length)n(e);else for(var o=e.length,i=function(r,c){try{if(c&&("object"==typeof c||"function"==typeof c)&&"function"==typeof c.then)return void c.then.call(c,(function(n){i(r,n)}),t);e[r]=c,0==--o&&n(e)}catch(n){t(n)}},r=0;r<e.length;r++)i(r,e[r])}))},a.resolve=function(n){return n&&"object"==typeof n&&n.constructor===a?n:new a((function(e){e(n)}))},a.reject=function(n){return new a((function(e,t){t(n)}))},a.race=function(n){return new a((function(e,t){for(var o=0,i=n.length;o<i;o++)n[o].then(e,t)}))},n.Promise=a}}(window);